"use strict";(self.webpackChunkmanulife_js=self.webpackChunkmanulife_js||[]).push([[847],{7301:function(e,t,n){n(2791);t.Z=n.p+"static/media/delete.dd86861fff09bcd4ee558e44e6dd15ed.svg"},4634:function(e,t,n){n(2791);t.Z=n.p+"static/media/plus.1d74c095c9a38f30393107ba102ce6ee.svg"},7862:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(9439),a=n(2014),c=n(6106),i=n(914),l=n(9228),r=n(7309),o=n(3168),u=n(2791);var d=n.p+"static/media/filter.4567431e2e3cea908b95cdf97e621b10.svg",m=n(184);function f(e){var t=(0,o.$)().t,n=e.options,f=e.setPayload,h=(0,u.useState)(!1),v=(0,s.Z)(h,2),p=v[0],x=v[1],j=(0,u.useState)(0),Z=(0,s.Z)(j,2),g=Z[0],b=Z[1],N=function(e){f(e),b(e.length)},y=(0,u.useMemo)((function(){return(0,m.jsx)(a.Z.Group,{style:{maxWidth:"400px"},onChange:N,className:"checkbox-item",children:(0,m.jsx)(c.Z,{children:n.map((function(e,t){return(0,m.jsx)(i.Z,{span:24,children:(0,m.jsx)(a.Z,{value:null===e||void 0===e?void 0:e.value,children:null===e||void 0===e?void 0:e.label})},t)}))})})}));return(0,m.jsx)("div",{className:"filter",children:(0,m.jsx)(l.Z,{content:y,trigger:"click",placement:"bottomLeft",onOpenChange:function(e){x(e)},children:(0,m.jsxs)(r.Z,{className:"filter__btn ".concat(p&&"filter__btn--active"),children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"filter__btn--count",children:g}),t("common.filter")]}),(0,m.jsx)("img",{src:d,alt:""})]})})})}},8755:function(e,t,n){n.d(t,{Z:function(){return o}});n(2791);var s=n(9968),a=n(3168),c=n(2997),i=n(184);function l(e){var t=(0,a.$)().t,n=e.data,s=e.selectId,l=void 0===s?null:s,r=e.setSelectId,o=void 0===r?null:r;return(0,i.jsx)("div",{className:"list-customer ".concat(l===n.customerId?"list-customer-active":""),onClick:function(){o&&o(null===n||void 0===n?void 0:n.customerId)},children:(0,i.jsxs)("div",{className:"list-customer__content",children:[(0,i.jsxs)("p",{className:"list-customer__content-name",children:[(0,i.jsx)("span",{className:"dot"}),null===n||void 0===n?void 0:n.fullname]}),(0,i.jsxs)("div",{className:"list-customer__content-gender",children:[(0,i.jsxs)("p",{className:"list-customer__content-gender--left",children:[(0,i.jsx)("span",{className:"before",children:t("common.gender")}),"Nam ",null===n||void 0===n?void 0:n.gender]}),(0,i.jsxs)("p",{className:"list-customer__content-gender--right",children:[(0,i.jsx)("span",{className:"before",children:t("common.old")})," ",(0,c.Fw)(null===n||void 0===n?void 0:n.dob)]})]}),(0,i.jsxs)("p",{className:"".concat(l===n.customerId?"color-green":""," list-customer__content-contract"),children:[(0,i.jsx)("span",{className:"before",children:t("common.contract")}),(0,c.mK)(null===n||void 0===n?void 0:n.income)]}),(0,i.jsxs)("p",{className:"list-customer__content-date",children:[(0,i.jsx)("span",{className:"before",children:t("common.sign date")}),(0,c.RL)(null===n||void 0===n?void 0:n.createdAt)]})]})})}function r(e){var t=e.data,n=e.selectId,s=void 0===n?null:n,a=e.setSelectId,c=void 0===a?null:a;return(0,i.jsx)("div",{className:"normal-item ".concat(s===t.key?"normal-item-active":""),onClick:function(){c&&c(null===t||void 0===t?void 0:t.key)},children:(0,i.jsx)("p",{className:"list-item-name",children:null===t||void 0===t?void 0:t.name})})}function o(e){var t=e.type,n=void 0===t?s.bP:t,a=e.dataList,c=e.selectId,o=e.setSelectId,u=a.map((function(e,t){return n===s.H4?(0,i.jsx)(l,{data:e,selectId:c,setSelectId:o},t):(0,i.jsx)(r,{data:e,selectId:c,setSelectId:o},t)}));return(0,i.jsx)("div",{className:"list-item",children:u})}},784:function(e,t,n){n.d(t,{Z:function(){return r}});n(2791);var s=n(9434),a=n(2862),c=n(7083),i=n(9968),l=n(184);function r(e){var t=e.isVisible,n=e.setIsVisible,r=e.title,o=e.width,u=void 0===o?600:o,d=e.content,m=(0,s.v9)((function(e){return e.loading})).loading;return(0,l.jsx)(a.Z,{className:"modal-custom",title:r,centered:!0,open:t,width:u,footer:null,onCancel:function(){return n(!1)},children:(0,l.jsx)(c.Z,{spinning:m===i.c9.pending,children:d})})}},8665:function(e,t,n){n.d(t,{Z:function(){return i}});n(2791);var s=n(9221),a=n(9968),c=n(184);function i(e){var t=e.pageSizeOptions,n=void 0===t?a.TJ:t,i=e.pageSize,l=void 0===i?a.Cg:i,r=e.total,o=e.showSizeChanger,u=void 0===o||o,d=e.setPaginate,m=function(e,t){d({limit:t,offset:e})};return r>a.Cg&&(0,c.jsx)(s.Z,{onChange:m,onShowSizeChange:m,defaultPageSize:l,total:r,pageSizeOptions:n,showSizeChanger:u})}},8840:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(1413),a=(n(2791),n(8565)),c=n(9434),i=n(9968),l=n(184);function r(e){var t=(0,c.v9)((function(e){return e.loading})),n=e.dataSource,r=e.columnTable,o=e.pagination,u=void 0!==o&&o,d=e.isSelection,m=void 0!==d&&d,f=e.bordered,h=void 0!==f&&f,v=e.setSelectedRowKeys,p=(e.isScroll,{onChange:function(e,t){v(t)}});return(0,l.jsx)(a.Z,(0,s.Z)((0,s.Z)({},e),{},{loading:t.loading===i.c9.pending,rowSelection:m?p:void 0,dataSource:n,columns:r,pagination:u,bordered:h,className:"table-common",rowKey:"id",children:e.children}))}},2997:function(e,t,n){n.d(t,{Fw:function(){return f},HT:function(){return m},RL:function(){return d},fm:function(){return h},mK:function(){return o},vk:function(){return u}});var s=n(4506),a=n(2426),c=n.n(a),i=n(9968),l=n(763),r=n.n(l),o=function(e){return e?(new Intl.NumberFormat).format(e):0},u=function(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c().localeData().longDateFormat("L");return c()(e).local().format(t)},m=function(e){return r().find(i.Rj,(function(t){return t.value===e})).label},f=function(e){var t=c()(e).utc().format("YYYY");return c()().format("YYYY")-t},h=function(e){var t=(0,s.Z)(e),n=t[0],a=t.slice(1),c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.language;return void 0===n?"":n.toLocaleUpperCase(c)+a.join("")}},8717:function(e,t,n){var s=n(2791),a=n(9434),c=n(9968);t.Z=function(e){var t=(0,a.v9)((function(e){return e.loading})),n=t.loading,i=t.errors;(0,s.useEffect)((function(){if(n===c.c9.failed&&i.length>0){var t=[];i.map((function(e){return t.push({name:e.field,errors:[e.message]})})),e.setFields(t)}}),[i])}},6847:function(e,t,n){n.r(t),n.d(t,{default:function(){return ce}});var s=n(2791),a=n(3168),c=n(6106),i=n(1413),l=n(4165),r=n(5861),o=n(9439),u=n(914),d=n(6058),m=n(7862),f=n(8755),h=n(9968),v=n(9476),p=n(8665),x=n(233),j=n(6650),Z=n(9434),g=n(184),b=[{label:"Kh\xf4ng c\xf2n ti\u1ec1m n\u0103ng, d\u1eebng t\u01b0 v\u1ea5n",value:1},{label:"Ch\u01b0a g\u1ecdi \u0111i\u1ec7n",value:2},{label:"\u0110\xe3 g\u1ecdi \u0111i\u1ec7n l\u1ea7n 1, c\u1ea7n g\u1ecdi l\u1ea7n 2",value:3},{label:"\u0110\xe3 c\xf3 l\u1ecbch h\u1eb9n g\u1eb7p kh\u1ea3o s\xe1t",value:4},{label:"\u0110\xe3 kh\u1ea3o s\xe1t, ch\u1edd l\u1ecbch t\u01b0 v\u1ea5n t\xe0i ch\xednh",value:5},{label:"\u0110\xe3 c\xf3 l\u1ecbch t\u01b0 v\u1ea5n t\xe0i ch\xednh",value:6},{label:"\u0110\xe3 t\u01b0 v\u1ea5n t\xe0i ch\xednh, ch\u1edd l\u1ecbch h\u1eb9n t\u01b0 v\u1ea5n  gi\u1ea3i ph\xe1p",value:7},{label:"\u0110\xe3 t\u01b0 v\u1ea5n gi\u1ea3i ph\xe1p, ch\u1edd ch\u1ed1t k\u1ebft qu\u1ea3",value:8},{label:"\u0110\xe3 ch\u1ed1t k\u1ebft qu\u1ea3, ch\u1edd th\xf4ng tin h\u1ee3p \u0111\u1ed3ng",value:9},{label:"\u0110\xe3 c\xf3 h\u1ee3p \u0111\u1ed3ng",value:10},{label:"Ch\u0103m s\xf3c kh\xe1ch h\xe0ng cho h\u1ee3p \u0111\u1ed3ng ti\u1ebfp theo",value:11}];function N(){var e=(0,s.useState)(0),t=(0,o.Z)(e,2),n=t[0],a=t[1],c=(0,s.useState)(""),N=(0,o.Z)(c,2),y=N[0],I=N[1],C=(0,s.useState)(""),_=(0,o.Z)(C,2),k=_[0],S=_[1],w=(0,s.useState)([]),T=(0,o.Z)(w,2),E=T[0],V=T[1],O=(0,s.useState)([]),F=(0,o.Z)(O,2),P=F[0],R=F[1],q=(0,Z.I0)(),M=(0,s.useState)({limit:h.Cg,offset:0}),z=(0,o.Z)(M,2),D=z[0],L=z[1],Y=function(){var e=(0,r.Z)((0,l.Z)().mark((function e(t){var n,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.O)(t);case 2:n=e.sent,(null===(s=n.data)||void 0===s?void 0:s.data.length)>0?(V(null===s||void 0===s?void 0:s.data),R(null===s||void 0===s?void 0:s.count),a(null===s||void 0===s?void 0:s.data[0].customerId)):(q((0,x.Oh)()),q((0,j.j8)()));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){}),[k]),(0,s.useEffect)((function(){if(n>0){var e=E.find((function(e){return e.customerId===n}));q((0,x.lL)(e)),q((0,x.Yu)({customerId:e.customerId,info:h.Rj[0].value}))}}),[n]),(0,s.useEffect)((function(){var e=(D.offset-1)*D.limit;Y((0,i.Z)((0,i.Z)({},{name:y}),{offset:e,limit:D.limit}))}),[y,D]),(0,g.jsxs)(u.Z,{span:4,className:"customer-care__left",children:[(0,g.jsx)(d.Z,{setPayload:I}),(0,g.jsx)(m.Z,{options:b,setPayload:S}),(0,g.jsx)(f.Z,{type:h.H4,dataList:E,selectId:n,setSelectId:a}),(0,g.jsx)(p.Z,{total:P,showSizeChanger:!1,setPaginate:L})]})}var y=n(7309),I=n(4571),C=n(8817),k=n(8840),S=n(4634);var w=n.p+"static/media/sms.291a3de15829b1d4877131f42a9776ee.svg";var T=n.p+"static/media/message.ce0a176034873dea3be97838ed025b7f.svg",E=n(7301),V=n(784),O=n(3734),F=n(9389),P=n(1095),R=n(1666),q=n(9106),M=n(2426),z=n.n(M),D=n(763),L=n.n(D),Y=n(8717),A=O.Z.Option,H=F.Z.TextArea;function G(e){var t=(0,a.$)().t,n=e.detailData,d=e.isTemplate,m=e.setVisibleModalAddEvent,f=P.Z.useForm(),v=(0,o.Z)(f,1)[0];(0,Y.Z)(v);var p=(0,Z.I0)(),x=(0,s.useState)([]),b=(0,o.Z)(x,2),N=b[0],I=b[1],C=(0,s.useState)(null),_=(0,o.Z)(C,2),k=_[0],S=_[1],w=function(){var e=(0,r.Z)((0,l.Z)().mark((function e(t){var n,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),n=v.getFieldsValue(),v.setFieldsValue((0,i.Z)((0,i.Z)({},n),{emailTemplate:"",smsTemplate:""})),e.next=5,(0,q.vw)({isTemplate:!0,date:z()(t).toISOString()});case 5:s=e.sent,I(s.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){Object.keys(n).length>0?v.setFieldsValue((0,i.Z)((0,i.Z)({},n),{date:z()(n.date)})):v.resetFields()}),[n]),(0,s.useEffect)((function(){Object.keys(n).length>0?v.setFieldsValue((0,i.Z)((0,i.Z)({},n),{date:z()(n.date)})):v.resetFields()}),[]),(0,g.jsx)(P.Z,{layout:"vertical",form:v,validateMessages:h.lw,onFinish:function(e){e.date=z()(e.date),e.isTemplate=d,Object.keys(n).length>0?(e.id=n.id,p((0,j.VA)(e))):p((0,j.nG)(e)),S(null),I([])},children:(0,g.jsxs)(c.Z,{gutter:[6,13],children:[(0,g.jsx)(u.Z,{span:6,children:(0,g.jsx)(P.Z.Item,{label:t("common.date"),name:"date",rules:[{required:!0}],children:(0,g.jsx)(R.Z,{className:"input-item-outline",format:h.GG,onChange:w})})}),(0,g.jsx)(u.Z,{span:6,children:(0,g.jsx)(P.Z.Item,{label:t("common.type"),name:"type",rules:[{required:!0}],children:(0,g.jsxs)(O.Z,{placeholder:t("common.select"),className:"select-item-outline",children:[(0,g.jsx)(A,{value:"H\u1eb1ng n\u0103m",children:"H\u1eb1ng n\u0103m"}),(0,g.jsx)(A,{value:"M\u1ed9t l\u1ea7n",children:"M\u1ed9t l\u1ea7n"})]})})}),(0,g.jsx)(u.Z,{span:12,children:(0,g.jsx)(P.Z.Item,{label:t("common.event"),name:"name",rules:[{required:!0}],children:(0,g.jsx)(F.Z,{className:"input-item-outline",placeholder:"Nh\u1eadp"})})}),(0,g.jsx)(u.Z,{span:24,children:(0,g.jsx)(P.Z.Item,{label:t("customer care.event template"),children:(0,g.jsx)(O.Z,{value:k,onChange:function(e){S(e);var t=L().find(N,(function(t){return t.id===e})),n=v.getFieldsValue();v.setFieldsValue((0,i.Z)((0,i.Z)({},n),{emailTemplate:t.emailTemplate,smsTemplate:t.smsTemplate}))},placeholder:t("common.select"),className:"select-item-outline",children:N.map((function(e){return(0,g.jsx)(A,{value:e.id,children:e.name},e.id)}))})})}),(0,g.jsx)(u.Z,{span:24,children:(0,g.jsx)(P.Z.Item,{label:t("customer care.sms template"),name:"smsTemplate",rules:[{required:!0}],children:(0,g.jsx)(H,{rows:2,placeholder:t("common.input"),className:"input-item-outline"})})}),(0,g.jsx)(u.Z,{span:24,className:"m-b-10",children:(0,g.jsx)(P.Z.Item,{label:t("customer care.email template"),name:"emailTemplate",rules:[{required:!0}],children:(0,g.jsx)(H,{rows:4,placeholder:t("common.input"),className:"input-item-outline"})})}),(0,g.jsx)(u.Z,{span:24,children:(0,g.jsxs)(P.Z.Item,{className:"footer-modal",children:[(0,g.jsx)(y.Z,{className:"btn-danger",onClick:function(){S(null),m(!1),I([])},children:t("common.cancel")},"back"),(0,g.jsx)(y.Z,{className:"btn-primary",htmlType:"submit",type:"primary",children:Object.keys(n).length>0?t("common.save"):t("common.create")},"submit")]})})]})})}var $=F.Z.TextArea;function K(e){var t=(0,a.$)().t,n=e.setVisibleModalSms,s=e.eventId,i=P.Z.useForm(),l=(0,o.Z)(i,1)[0],r=(0,Z.I0)(),d=(0,Z.v9)((function(e){return e.customerCare})).customerData;return(0,g.jsx)(P.Z,{layout:"vertical",form:l,validateMessages:h.lw,onFinish:function(e){e.type="sms",e.customerId=d.customerId,e.eventId=s,r((0,j.qP)(e))},children:(0,g.jsxs)(c.Z,{gutter:[8,23],children:[(0,g.jsx)(u.Z,{span:24,children:(0,g.jsx)(P.Z.Item,{label:t("customer care.sms content"),name:"content",rules:[{required:!0}],children:(0,g.jsx)($,{rows:4,placeholder:t("common.input"),className:"input-item-outline"})})}),(0,g.jsx)(u.Z,{span:24,children:(0,g.jsxs)(P.Z.Item,{className:"footer-modal",children:[(0,g.jsx)(y.Z,{className:"btn-danger",onClick:function(){return n(!1)},children:t("common.cancel")},"back"),(0,g.jsx)(y.Z,{className:"btn-primary",htmlType:"submit",type:"primary",children:t("customer care.sms title")},"submit")]})})]})})}var B=F.Z.TextArea;function U(e){var t=(0,a.$)().t,n=e.setVisibleModalEmail,s=e.eventId,i=P.Z.useForm(),l=(0,o.Z)(i,1)[0],r=(0,Z.I0)(),d=(0,Z.v9)((function(e){return e.customerCare})).customerData;return(0,g.jsx)(P.Z,{layout:"vertical",form:l,validateMessages:h.lw,onFinish:function(e){e.type="email",e.customerId=d.customerId,e.eventId=s,r((0,j.qP)(e))},children:(0,g.jsxs)(c.Z,{gutter:[8,23],children:[(0,g.jsx)(u.Z,{span:24,children:(0,g.jsx)(P.Z.Item,{label:t("customer care.email content"),name:"content",rules:[{required:!0}],children:(0,g.jsx)(B,{rows:4,placeholder:t("common.input"),className:"input-item-outline"})})}),(0,g.jsx)(u.Z,{span:24,children:(0,g.jsxs)(P.Z.Item,{className:"footer-modal",children:[(0,g.jsx)(y.Z,{className:"btn-danger",onClick:function(){return n(!1)},children:t("common.cancel")},"back"),(0,g.jsx)(y.Z,{className:"btn-primary",htmlType:"submit",type:"primary",children:t("customer care.email title")},"submit")]})})]})})}var W=n(2997);function J(){var e=(0,a.$)().t,t=(0,s.useRef)(null),n=(0,Z.v9)((function(e){return e.customerCare})).customerData,c=(0,Z.v9)((function(e){return e.loading.loading})),l=(0,Z.v9)((function(e){return e.events})),r=(0,s.useState)(!1),d=(0,o.Z)(r,2),m=d[0],f=d[1],v=(0,s.useState)(!1),p=(0,o.Z)(v,2),x=p[0],b=p[1],N=(0,s.useState)(!1),_=(0,o.Z)(N,2),O=_[0],F=_[1],P=(0,s.useState)({}),R=(0,o.Z)(P,2),q=R[0],M=R[1],z=(0,s.useState)(0),D=(0,o.Z)(z,2),L=D[0],Y=D[1],A=(0,s.useState)(!1),H=(0,o.Z)(A,2),$=H[0],B=H[1],J=(0,s.useState)({}),Q=(0,o.Z)(J,2),X=Q[0],ee=Q[1],te=(0,s.useState)(""),ne=(0,o.Z)(te,2),se=ne[0],ae=ne[1],ce=(0,Z.I0)(),ie=[{title:e("common.stt"),key:"stt",width:"10%",render:function(e,t,n){return(0,W.vk)(n+1,2)}},{title:e("common.date"),key:"date",width:"24%",render:function(e){return(0,g.jsx)("span",{children:(0,W.RL)(e.date)})}},{title:e("common.content"),key:"name",render:function(e){return(0,g.jsx)("span",{className:"cursor-pointer",onClick:function(){return ue(e)},children:e.name})}},{title:"",key:"action",width:"42%",render:function(t){return(0,g.jsxs)("div",{className:"btn-table",children:[(0,g.jsx)(y.Z,{className:"btn-table__btn btn-table-sms m-r-10",icon:(0,g.jsx)("img",{src:w,alt:""}),onClick:function(){return le(t.id)},children:e("customer care.sms")}),(0,g.jsx)(y.Z,{className:"btn-table__btn btn-table-email m-r-10",icon:(0,g.jsx)("img",{src:T,alt:""}),onClick:function(){return re(t.id)},children:e("customer care.email")}),(0,g.jsx)(I.Z,{className:"pop-confirm-delete",placement:"top",title:e("common.delete title"),onConfirm:function(){return de(t.id)},okText:e("common.delete"),cancelText:e("common.cancel"),children:(0,g.jsx)(y.Z,{className:"btn-table__btn btn-table-del flex-end",icon:(0,g.jsx)("img",{src:E.Z,alt:""})})})]})}}],le=function(e){F(!0),Y(e)},re=function(e){b(!0),Y(e)},oe=function(t){f(!0),M({}),B(t);var n=e(t?"customer care.add template":"customer care.add event title");ae(n)},ue=function(t){f(!0),M((0,i.Z)({},t)),ae(e("customer care.edit event title"))},de=function(e){ce((0,j.SR)(e))};return(0,s.useEffect)((function(){n.customerId>0&&ce((0,j.Yu)({isTemplate:!1}))}),[n]),(0,s.useEffect)((function(){if(t.current.clientHeight>.5*window.innerHeight){ee({y:"calc(100vh - 450px)",scrollToFirstRowOnChange:!1})}})),(0,s.useEffect)((function(){c===h.c9.succeeded&&(f(!1),b(!1),F(!1))}),[c]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.Z,{span:9,className:"customer-care__center",children:[(0,g.jsxs)("div",{className:"customer-care__center--progress",children:[(0,g.jsx)("span",{children:e("common.progress")}),(0,g.jsx)(C.Z,{percent:60})]}),(0,g.jsx)("div",{className:"customer-care__center--event",children:(0,g.jsx)("h5",{children:e("customer care.event title")})}),(0,g.jsxs)("div",{className:"customer-care__center--list",ref:t,children:[(0,g.jsx)(k.Z,{dataSource:l.data,columnTable:ie,scroll:X}),n.customerId>0&&(0,g.jsxs)("div",{className:"customer-care__center--list-footer",children:[(0,g.jsx)(y.Z,{className:"btn-add-new",icon:(0,g.jsx)("img",{src:S.Z,alt:""}),onClick:function(){return oe(!0)},children:e("customer care.add event template")}),(0,g.jsx)(y.Z,{className:"btn-add-new",icon:(0,g.jsx)("img",{src:S.Z,alt:""}),onClick:function(){return oe(!1)},children:e("customer care.add event")})]})]})]}),(0,g.jsx)(V.Z,{isVisible:m,setIsVisible:f,title:se,width:770,content:(0,g.jsx)(G,{detailData:q,isTemplate:$,setVisibleModalAddEvent:f})}),(0,g.jsx)(V.Z,{isVisible:x,setIsVisible:b,title:e("customer care.email title"),width:770,content:(0,g.jsx)(U,{eventId:L,setVisibleModalEmail:b})}),(0,g.jsx)(V.Z,{isVisible:O,setIsVisible:F,title:e("customer care.sms title"),width:770,content:(0,g.jsx)(K,{eventId:L,setVisibleModalSms:F})})]})}var Q=n(2014);var X=n.p+"static/media/files.d06abc6a82fa3dbe2d8e296986729dbe.svg",ee=O.Z.Option,te=F.Z.TextArea;function ne(e){var t=P.Z.useForm(),n=(0,o.Z)(t,1)[0];(0,Y.Z)(n);var l=(0,a.$)().t,r=(0,Z.v9)((function(e){return e.customerCare})).customerData,d=e.detailData,m=e.setVisibleModalAddInfo,f=(0,Z.I0)();return(0,s.useEffect)((function(){Object.keys(d).length>0?n.setFieldsValue((0,i.Z)((0,i.Z)({},d),{date:z()(d.date)})):n.resetFields()}),[d]),(0,g.jsx)(P.Z,{layout:"vertical",form:n,validateMessages:h.lw,onFinish:function(e){e.date=z()(e.date),e.customerId=r.customerId,Object.keys(d).length>0?(e.id=d.id,f((0,x.VA)(e))):f((0,x.nG)(e))},children:(0,g.jsxs)(c.Z,{gutter:[6,13],children:[(0,g.jsx)(u.Z,{span:6,children:(0,g.jsx)(P.Z.Item,{label:l("common.date"),name:"date",rules:[{required:!0}],children:(0,g.jsx)(R.Z,{className:"input-item-outline",format:h.GG})})}),(0,g.jsx)(u.Z,{span:18,children:(0,g.jsx)(P.Z.Item,{label:l("common.type info"),name:"info",rules:[{required:!0}],children:(0,g.jsx)(O.Z,{className:"select-item-outline",placeholder:l("common.select"),children:h.Rj.map((function(e,t){return(0,g.jsx)(ee,{value:e.value,children:e.label},t)}))})})}),(0,g.jsx)(u.Z,{span:24,className:"m-b-10",children:(0,g.jsx)(P.Z.Item,{label:l("common.content"),name:"content",rules:[{required:!0}],children:(0,g.jsx)(te,{rows:3,placeholder:l("common.input"),className:"input-item-outline"})})}),(0,g.jsx)(u.Z,{span:24,children:(0,g.jsxs)(P.Z.Item,{className:"footer-modal",children:[(0,g.jsx)(y.Z,{className:"btn-danger",onClick:function(){return m(!1)},children:l("common.cancel create")},"back"),(0,g.jsx)(y.Z,{className:"btn-primary",htmlType:"submit",type:"primary",children:l("common.create new")},"submit")]})})]})})}var se=n(1087);function ae(){var e=(0,a.$)().t,t=(0,s.useRef)(null),n=(0,Z.v9)((function(e){return e.loading.loading})),c=(0,Z.v9)((function(e){return e.customerCare})),i=c.data,l=c.customerData,r=(0,s.useState)(!1),d=(0,o.Z)(r,2),f=d[0],v=d[1],p=(0,s.useState)({}),j=(0,o.Z)(p,2),b=j[0],N=j[1],I=(0,s.useState)(""),C=(0,o.Z)(I,2),w=C[0],T=C[1],E=(0,s.useState)(""),O=(0,o.Z)(E,2),F=O[0],P=O[1],R=(0,s.useState)({}),q=(0,o.Z)(R,2),M=q[0],z=q[1],D=(0,Z.I0)(),L=[{title:e("common.date"),key:"date",width:"20%",render:function(e){return(0,g.jsx)("span",{children:(0,W.RL)(e.date)})}},{title:e("common.type info"),key:"info",width:"25%",render:function(e){return(0,g.jsx)("span",{children:(0,W.HT)(e.info)})}},{title:e("common.content"),dataIndex:"content",key:"content"},{title:"",key:"info",width:"18%",render:function(e){if(h.Y3.includes(e.info))return(0,g.jsx)("div",{className:"d-flex-end",children:(0,g.jsx)(se.rU,{to:h.c[e.info],className:"btn-bgWhite-textGreen-borGreen pd-btn",children:(0,g.jsx)("span",{children:"Xem"})})})}}];return(0,s.useEffect)((function(){l.customerId>0&&D((0,x.Yu)({customerId:l.customerId,info:w[0]}))}),[w]),(0,s.useEffect)((function(){n===h.c9.succeeded&&v(!1)}),[n]),(0,s.useEffect)((function(){if(t.current.clientHeight>.5*window.innerHeight){z({y:"calc(100vh - 600px)",scrollToFirstRowOnChange:!1})}})),(0,s.useEffect)((function(){if(P(""),i.length>0){var e=_.filter(i,(function(e){if(e.info===h.R_)return{content:e.content,date:e.date}}));e.length>0&&P("Qu\xe0 t\u1eb7ng l\u1ea7n cu\u1ed1i ".concat((0,W.fm)(_.last(e).content)," v\xe0o ng\xe0y ").concat((0,W.RL)(_.last(e).date)))}}),[i]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(u.Z,{span:11,className:"customer-care__right",children:[(0,g.jsx)("div",{className:"customer-care__right--top",children:(0,g.jsx)(Q.Z,{className:"checkbox-item",checked:!l.isPotential,children:e("customer care.no more potential")})}),(0,g.jsx)("div",{className:"customer-care__right--event",children:(0,g.jsxs)("div",{className:"customer-care__right--event--left",children:[(0,g.jsx)("h5",{children:e("customer care.history title")}),(0,g.jsx)(m.Z,{options:h.Rj,setPayload:T})]})}),(0,g.jsxs)("div",{className:"customer-care__right--list",ref:t,children:[(0,g.jsx)(k.Z,{dataSource:i,columnTable:L,scroll:M}),0!==l.customerId&&(0,g.jsx)("div",{className:"customer-care__right--list-footer",children:(0,g.jsx)(y.Z,{className:"btn-add-new",icon:(0,g.jsx)("img",{src:S.Z,alt:""}),onClick:function(){return v(!0),void N({})},children:e("customer care.add info title")})})]}),0!==l.customerId&&(0,g.jsxs)("div",{className:"customer-care__right--info",children:[(0,g.jsxs)("h3",{children:[(0,g.jsx)("img",{src:X,alt:""}),e("customer care.sync info")]}),(0,g.jsxs)("ul",{children:[(0,g.jsxs)("li",{children:[(0,W.Fw)(l.dob)," tu\u1ed5i, ",1==l.maritalStatus?" \u0111\xe3 c\xf3 gia \u0111\xecnh":", \u0111\u1ed9c th\xe2n"]}),l.income>0&&(0,g.jsxs)("li",{children:["Thu nh\u1eadp ",l.income/1e6," tri\u1ec7u \u0111\u1ed3ng/th\xe1ng"]}),!!l.job&&(0,g.jsxs)("li",{children:["Ngh\u1ec1 nghi\u1ec7p ",(0,g.jsx)("span",{className:"capitalize",children:l.job})]}),!!l.concerns&&(0,g.jsxs)("li",{children:["S\u1edf th\xedch ",(0,g.jsx)("span",{className:"capitalize",children:l.concerns})]}),!!F&&(0,g.jsx)("li",{children:F}),!!l.note&&(0,g.jsxs)("li",{children:["Kh\xe1c: ",(0,g.jsx)("span",{className:"capitalize",children:l.note})]})]})]})]}),(0,g.jsx)(V.Z,{isVisible:f,setIsVisible:v,title:Object.keys(b).length>0?e("customer care.edit info title"):e("customer care.add info title"),width:770,content:(0,g.jsx)(ne,{detailData:b,setVisibleModalAddInfo:v})})]})}function ce(){var e=(0,a.$)().t;return(0,g.jsxs)("div",{className:"content-box customer-care",children:[(0,g.jsx)("h3",{children:e("customer care.title")}),(0,g.jsxs)(c.Z,{children:[(0,g.jsx)(N,{}),(0,g.jsx)(J,{}),(0,g.jsx)(ae,{})]})]})}},4571:function(e,t,n){n.d(t,{Z:function(){return I}});var s=n(7462),a=n(9439),c=n(187),i=n(1694),l=n.n(i),r=n(5179),o=n(1354),u=n(2791),d=n(1929),m=n(9228),f=n(1113),h=n(7309),v=n(2571),p=n(1783),x=n(3486),j=n(454),Z=n(7924);function g(e){var t=e.prefixCls,n=e.okButtonProps,a=e.cancelButtonProps,c=e.title,i=e.cancelText,l=e.okText,r=e.okType,o=e.icon,m=e.showCancel,f=void 0===m||m,g=e.close,b=e.onConfirm,N=e.onCancel,y=u.useContext(d.E_).getPrefixCls;return u.createElement(x.Z,{componentName:"Popconfirm",defaultLocale:j.Z.Popconfirm},(function(e){return u.createElement("div",{className:"".concat(t,"-inner-content")},u.createElement("div",{className:"".concat(t,"-message")},o,u.createElement("div",{className:"".concat(t,"-message-title")},(0,Z.Z)(c))),u.createElement("div",{className:"".concat(t,"-buttons")},f&&u.createElement(h.Z,(0,s.Z)({onClick:N,size:"small"},a),i||e.cancelText),u.createElement(p.Z,{buttonProps:(0,s.Z)((0,s.Z)({size:"small"},(0,v.n)(r)),n),actionFn:b,close:g,prefixCls:y("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},l||e.okText)))}))}var b=void 0,N=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n},y=u.forwardRef((function(e,t){var n=u.useContext(d.E_).getPrefixCls,c=(0,r.Z)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),i=(0,a.Z)(c,2),h=i[0],v=i[1],p=function(t,n){var s,a;v(t,!0),null===(s=e.onVisibleChange)||void 0===s||s.call(e,t,n),null===(a=e.onOpenChange)||void 0===a||a.call(e,t,n)},x=e.prefixCls,j=e.placement,Z=e.children,y=e.overlayClassName,I=N(e,["prefixCls","placement","children","overlayClassName"]),C=n("popover",x),_=n("popconfirm",x),k=l()(_,y);return u.createElement(m.Z,(0,s.Z)({},I,{prefixCls:C,placement:j,onOpenChange:function(t){e.disabled||p(t)},open:h,_overlay:u.createElement(g,(0,s.Z)({},e,{prefixCls:C,close:function(e){p(!1,e)},onConfirm:function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(b,t)},onCancel:function(t){var n;p(!1,t),null===(n=e.onCancel)||void 0===n||n.call(b,t)}})),overlayClassName:k,ref:t}),(0,f.Tm)(Z,{onKeyDown:function(e){var t,n;u.isValidElement(Z)&&(null===(n=null===Z||void 0===Z?void 0:(t=Z.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===o.Z.ESC&&h&&p(!1,e)}(e)}}))}));y.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:u.createElement(c.Z,null),disabled:!1};var I=y}}]);
//# sourceMappingURL=847.be03e6c6.chunk.js.map